<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<img id='e1-5-send' src='send.png' width='50px' height='50px'></img>
<div class='modal fade' id='e1-5-modal-send-message'>
    <div class='modal-dialog'>
        <div class='modal-content'>
            <div class='header'>
                <h2 class='modal-title'>SendMessage</h2>
            </div>
            <div class='body'>
                <div class="input-group">
                    <label class="control-label" for="receiver">Receiver:</label> 
                    <input type="text" class="form-control" id="receiver" name='receiver' placeholder="Enter the receiver's username">
                    <label class="control-label" for="message">Message:</label> 
                    <input type="text" class="form-control" id="message" name='message' placeholder="Enter a message to send">
                </div>
            </div>
            <div class='footer'>
                <div class="input-group"> 
                    <button type='button' class="btn btn-outline-danger" data-bs-dismiss='modal'>Cancel</button>
                    <button id='submit-send-message' type="button" class="btn btn-outline-primary">Submit</button>
                </div>
            </div>  
        </div>  
    </div>    
</div>   
    
<script>
$(function() {  // When the image is clicked
    $('#e1-5-send').click(function() {
        $('#e1-5-modal-send-message').modal('show');  // The modal window will be shown.
    });
});

$(function() {  // When the button "Submit" is clicked,
    $('#submit-send-message').click(function() {
        $('#e1-5-modal-send-message').modal('hide');  // The modal window will be hidden.
        
        var xhttp = new XMLHttpRequest();  // AJAX code for the SendMessage command. The command will be sent to test_send_message.php.
        xhttp.onload = function() {
            alert(this.responseText);
        };
        xhttp.open("POST", "test_send_message.php");
        xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        var query = "";
        query += "page=MainPage";
        query += "&receiver=" + $('#receiver').val();
        query += "&message=" + $('#message').val();
        xhttp.send(query);
    });
});
</script>
